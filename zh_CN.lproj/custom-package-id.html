<h1><a href="/Small/cn/custom-package-id#自定义资源id分段" id=自定义资源id分段 aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自定义资源ID分段</h1>
<p>在整合插件资源的过程，为避免资源ID冲突，需要为每个插件分配一个ID段。</p>

<p>我们知道默认程序的ID段为 0x7f。由于系统使用了 0x00，0x01，0x02。因此插件允许的范围在 [0x03, 0x7e] 之间。</p>

<p>但是有些手机厂商占用了一些分段，黑名单如下：</p>

<table><thead>
<tr>
<th>ID</th>
<th>厂商</th>
</tr>
</thead><tbody>
<tr>
<td>0x03</td>
<td>HTC</td>
</tr>
<tr>
<td>0x10</td>
<td>小米</td>
</tr>
</tbody></table>

<p>为此，Small 根据哈希算法将插件的模块名散列到 [0x11, 0x7e] 区间，作为自动分配的插件资源ID段，比如：</p>

<table><thead>
<tr>
<th>模块名</th>
<th>ID</th>
</tr>
</thead><tbody>
<tr>
<td>app.main</td>
<td>0x77</td>
</tr>
<tr>
<td>lib.style</td>
<td>0x79</td>
</tr>
</tbody></table>

<p>但是，这个算法生成的ID有可能是重复的，所以必要时你可以通过以下方法自定义插件的资源ID。</p>
<h2><a href="/Small/cn/custom-package-id#修改-build.gradle" id=修改-build.gradle aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改 build.gradle</h2>
<p>在插件模块所在的 build.gradle 脚本里，增加配置：</p>
<div class="highlight highlight-source-groovy"><pre><span class="n">ext</span> <span class="o">{</span>
    <span class="n">packageId</span> <span class="o">=</span> <span class="mh">0x12</span>
<span class="o">}</span>
</pre></div>
<blockquote>
<p>这里的 0x12 是16进制整型值</p>
</blockquote>

<p>将把当前插件的资源ID段分配为 0x12。</p>
<h2><a href="/Small/cn/custom-package-id#或修改-gradle.properties" id=或修改-gradle.properties aria-hidden="true" class="anchor"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>或修改 gradle.properties</h2>
<p>在插件模块所在的 gradle.properties 配置里，增加配置：</p>
<div class="highlight highlight-source-text"><pre>packageId=3f
</pre></div>
<blockquote>
<p>properties只接收字符串值</p>
</blockquote>

<p>将把当前插件的资源ID段分配为 0x3f。</p>
